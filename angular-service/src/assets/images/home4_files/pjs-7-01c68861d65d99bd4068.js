webpackJsonp([7,104],{"9bGG":function(e,t,n){"use strict";t.a=C;var r=n("d6ZO"),a=n.n(r);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function l(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?p(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=32,h=100,v=null,y=!1,g=[],E=function e(){v&&clearTimeout(v),y=!0,v=setTimeout(function(){y=!1},h)},w=function e(t){0===g.length&&window.addEventListener("scroll",E),g.push(t)},_=function e(t){var n=g.indexOf(t);g.splice(n,1),0===g.length&&window.removeEventListener("scroll",E)};function C(t){return function(e){function o(){var e,t;i(this,o);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return m(p(p(t=l(this,(e=u(o)).call.apply(e,[this].concat(r))))),"state",{isHovering:!1}),m(p(p(t)),"handlers",{onMouseOver:function e(){return t._setHover(!0)},onMouseLeave:function e(){return t._setHover(!1)}}),t}return d(o,e),s(o,[{key:"componentDidMount",value:function e(){w(this)}},{key:"componentWillUnmount",value:function e(){this.hoverTimer&&clearTimeout(this.hoverTimer),_(this)}},{key:"_setHover",value:function e(t){var n=this;this.hoverTimer&&clearTimeout(this.hoverTimer),this.hoverTimer=t&&y?setTimeout(function(){return n._setHover(t)},h):setTimeout(function(){t!==n.state.isHovering&&n.setState({isHovering:t})},b)}},{key:"render",value:function e(){return r.createElement(t,Object.assign({},this.props,{hoverHandlers:this.handlers,isHovering:this.state.isHovering}))}}]),o}(r.Component)}},Hdz3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var r=n("d6ZO"),a=n.n(r),o=n("lVil"),i=n("dZgC"),c=n("gEaE"),s=n("6oz1");function l(e){var n=e.onDismiss;return a.a.createElement(s.b,{name:"web_contact_requests_inbox",activate:!1},function(e){var t=e.customActivate;return a.a.createElement("div",{className:"NewsConversationsDropdown"},a.a.createElement("div",{className:"content"},a.a.createElement(c.b,{maxHeight:t?500:void 0},a.a.createElement(i.b,null,function(e){return a.a.createElement(o.a,{requestContext:e,onDismiss:n,activateContactRequestsInboxExperiment:t})}))))})}},PrM5:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=f;var a="facebook",o="twitter",i="google",c="youtube",s="gplus",l="microsoft",u="etsy",d="instagram";function f(e){var t;return r(t={},a,{connected:e.connected_to_facebook||!1}),r(t,i,{connected:e.connected_to_google||!1}),r(t,c,{connected:e.connected_to_youtube||!1}),r(t,s,{connected:!!e.gplus_url,url:e.gplus_url}),r(t,l,{connected:e.connected_to_microsoft||!1}),r(t,o,{connected:!!e.twitter_url,url:e.twitter_url}),r(t,u,{connected:e.connected_to_etsy||!1}),r(t,d,{connected:e.connected_to_instagram||!1}),t}},Svvu:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("hlP+"),a=n.n(r),s=n("BVzu"),o=n("XZ9g"),l=n.n(o),i=n("/4D9"),u=n.n(i),d=n("W/Cr"),f=n("DLm7"),p=n("EAiy"),c;function m(){}Object.assign(m.prototype,a.a),Object.assign(m.prototype,{connect:function e(o,i){var c=this;(i=Object.assign({},{success:function e(){},error:function e(){},complete:function e(){}},i)).rerequest_facebook_email?u()().then(function(e){var t;e.default.ensureInit(function(e){e.login(function(e){var t=e.authResponse,n,r;t&&(n=(n=t.grantedScopes)?n.split(","):[],r=t.userID);var a=n.find(function(e){return"email"===e}),o={id:r};"connected"===e.status&&a?i.success(o):i.error(o),i.complete()},{scope:"email",auth_type:"rerequest",return_scopes:!0})},p.a)}):l()().then(function(e){var t,n=e.default.getWindowOptions(),r=window.open("/connect/"+o+"/","",n);if(!r)return s.default.showError(d.a._("You must enable popups!")),void i.error({network:o,alertedUpstream:!0});var a=f.a.setInterval(function(){r.closed&&(clearInterval(a),c.handleComplete({network:o,error_message:"Window closed."}))},1e3);c.once("connect:"+o,function(e){clearInterval(a),e.error_message?i.error(e):i.success(e),i.complete()})})},complete:function e(t){this.handleComplete(t)},handleComplete:function e(t){var n="connect:"+t.network,r;if("facebook"===t.network){var a=t.id;a&&"string"!=typeof a&&(t.error_message="Facebook id must be of string type")}this.trigger(n,t)}}),Object.assign(m,{instance:function e(){return c||(c=new m),c},FACEBOOK:"facebook",TWITTER:"twitter",GOOGLE:"google",YOUTUBE:"youtube",GPLUS:"gplus",MICROSOFT:"microsoft",ETSY:"etsy"}),window.addEventListener("message",function(e){var t=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");e.origin===t&&"social-connect-complete"===e.data.type&&m.instance().complete(e.data)}),t.default=m},T0l7:function(e,t,n){"use strict";t.c=i,t.d=c,t.a=u,t.b=d;var a=n("/e0Y"),s=n("Cjb7"),r=n("THYI"),l=n.n(r),o="collaborator_approve_invite";function i(e,t){return l.a.create("BoardEmailInviteResource",{board_id:e,emails:t}).callCreate()}function c(e,t){return l.a.create("BoardInviteResource",{board_id:e,invited_user_ids:t}).callCreate()}function u(n,r){return function(e){var t;return l.a.create("BoardInviteResource",{board_id:n,invited_user_id:r}).callUpdate().then(function(){a.a.trackEvent(o,"success"),s.a.instance.publish(n,"boardApprovedCollaboratorInvite",{userId:r})}).catch(function(){return a.a.trackEvent(o,"error")})}}function d(o,i,c){return function(e){var t=o.invited_user,n=o.status,r=o.board.id,a;return l.a.create("accepted"===n?"BoardCollaboratorResource":"BoardInviteResource",{ban:c,board_id:r,field_set_key:"boardEdit",invited_user_id:t.id}).callDelete({showError:!1}).then(function(){s.a.instance.publish(r,"boardWriteAccessUpdated"),c&&s.a.instance.publish(r,"boardBannedCollaborator"),i&&(s.a.instance.publish("currentUser","boardRemovedCollaboratorSelf"),s.a.instance.publish(r,"boardRemovedCollaboratorSelf"))})}}},U7FU:function(e,t,n){"use strict";var r=n("d6ZO"),i=n.n(r),a=n("DUIN"),o=n("GGB8"),c=n.n(o),s=n("IaRT"),l=n.n(s),u=n("gEaE");function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}function b(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=3,_=[["fullWrapper"],["leftWrapper halfWrapper","rightWrapper halfWrapper isWholeHalf"],["leftWrapper halfWrapper","rightWrapper halfWrapper smallImage top","rightWrapper halfWrapper smallImage bottom"]],C=function e(t,n){var r=t.name,a=t.image_thumbnail_url;return i.a.createElement("div",{className:c()("Image","Module","boardMessageRep",n)},i.a.createElement("img",{alt:r,src:a}))},O=function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],r=2<arguments.length?arguments[2]:void 0,a=3<arguments.length?arguments[3]:void 0,o={small:"sm",medium:"md",normal:"lg"};return i.a.createElement(u.b,{display:"flex",alignItems:"center"},i.a.createElement(u.l,{collaborators:r.map(function(e,t){return{name:e.full_name||e.email||e.username||"user ".concat(t),src:e.is_default_image?void 0:e.image_large_url||e.image_medium_url}}),size:o[t]}))},k=function(e){function t(){return f(this,t),b(this,v(t).apply(this,arguments))}return y(t,e),m(t,[{key:"getUsersToShow",value:function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],r=this.props.viewerId;return void 0!==r&&(n=n.filter(function(e){return e.id!==r})),n.concat(t.map(function(e){return{full_name:e,first_name:e,username:e}})).slice(0,3)}},{key:"render",value:function e(){var t=this.props,n=t.board,r=t.emails,a=t.shouldLink,o=t.size,i=t.users,c=this.getUsersToShow(r,i),s=c.length<=3?_[c.length-1]:[];return n?C(n,o):0<c.length?O(o,s,c,a):null}}]),t}(r.Component);function I(e){var t=e.viewer;return{viewerId:t.isAuth?t.id:null}}E(k,"defaultProps",{shouldLink:!1,size:"medium"}),t.a=Object(a.connect)(I)(k)},XSNT:function(e,t,n){"use strict";n.d(t,"a",function(){return v});var r=n("d6ZO"),a=n.n(r),o=n("IaRT"),i=n.n(o);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function d(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?b(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){function r(e,t){var n;return s(this,r),h(b(b(n=d(this,f(r).call(this,e,t)))),"handleChange",function(e){n.props.onChange&&n.props.onChange(e.target.value),n.setState({value:e.target.value,hasChanged:!0})}),n.state={isFocused:n.props.focused||!1,value:n.props.value,hasChanged:void 0!==n.props.value},n}return p(r,e),u(r,[{key:"componentDidMount",value:function e(){this.state.isFocused&&this._input.focus()}},{key:"UNSAFE_componentWillReceiveProps",value:function e(t){this.setState({value:t.value})}},{key:"getId",value:function e(){return this.props.id}},{key:"getValue",value:function e(){return this.state.value}},{key:"focus",value:function e(){this._input.focus()}},{key:"render",value:function e(){var n=this;return a.a.createElement("input",{autoComplete:this.props.autoComplete,className:this.props.className,disabled:this.props.disabled?"disabled":"",id:this.props.id,name:this.props.name,onBlur:this.props.onBlur?this.props.onBlur.bind(this):null,onChange:this.handleChange,onClick:this.props.onClick?this.props.onClick.bind(this):null,onFocus:this.props.onFocus?this.props.onFocus.bind(this):null,onKeyDown:this.props.onKeyDown?this.props.onKeyDown.bind(this):null,placeholder:this.props.placeholder,ref:function e(t){n._input=t},style:this.props.style,type:this.props.type,value:this.state.value||""})}}]),r}(r.Component);v.defaultProps={type:"text"}},XZ9g:function(e,t,n){e.exports=function(){return new Promise(function(t){n.e(84).then(function(e){t(n("0YTL"))}.bind(null,n)).catch(n.oe)})}},cD7N:function(e,t,n){"use strict";var o=n("Cjb7"),r=n("THYI"),c=n.n(r),a=n("Svvu"),s=n("DLm7"),i=n("EAiy"),l=1e3,u=110;function d(){}Object.assign(d.prototype,{handleConnect:function e(n,r,a){if(r&&!i.a.isLimitedLogin()){var t={success:function(e){var t={network:n,data:e};this._internalConnectNetwork(r,t,a)}.bind(this),error:function e(t){a.error&&a.error(t)},complete:function e(){a.complete&&a.complete()}};this._externalConnectNetwork(n,r,t)}else{var o={network:n};this._internalConnectNetwork(r,o,a)}},updateConnectStatus:function e(){var t;c.a.create("UserResource",{user_id:i.a.get("id"),username:i.a.get("username"),field_set_key:"social_connect"}).callGet().then(function(e){var t=e.resource_response.data;i.a.set(t),o.a.instance.publish("currentUser","socialNetworkUpdated",t)})},_externalConnectNetwork:function e(t,n,r){n?a.default.instance().connect(t,r):r.success&&r.success({})},_internalConnectNetwork:function e(t,n,r){var a=this,o=c.a.create("UserSocialNetworkResource",n);(t?o.callCreate():o.callDelete()).then(function(e){a.updateConnectStatus(),r.success&&r.success(e)},function(e){r.error&&e instanceof Object&&r.error(e)}).finally(function(){r.complete&&r.complete()})},_getResourceNameForNetworkFriends:function e(t){var n=null;switch(t){case a.default.FACEBOOK:n="UserFacebookFriendsResource";break;case a.default.TWITTER:n="UserTwitterFriendsResource";break;case a.default.GOOGLE:n="UserGmailFriendsResource";break;case a.default.MICROSOFT:n="UserMicrosoftFriendsResource";break;default:return}return n},_handleFriendsImported:function e(t,n,r){var a={resource:n,network:t,error:r};o.a.instance.publish("site","friendImportCompleted",a)},pollForFriends:function e(n,r){var a=this,t=(r=r||{}).resourceOptions||{},o=this._getResourceNameForNetworkFriends(n);if(o){var i=c.a.create(o,t);i.callGet({showError:!1}).then(function(){var e=r.success;e&&e(i),a._handleFriendsImported(n,i,null)},function(e){if(e.api_error_code===u)s.a.setTimeout(function(){a.pollForFriends(n,r)},l);else{var t=r.error;t&&t(),a._handleFriendsImported(n,i,e)}})}}});var f=null;d.instance=function(){return f||(f=new d),f},t.a=d},cy6F:function(e,t,n){"use strict";t.a=c;var r=n("d6ZO"),a=n.n(r),o=n("IaRT"),i=n.n(o);function c(e){var t=e.mask,n=e.loading,r=e.size;return a.a.createElement("div",null,t&&a.a.createElement("div",{className:"moduleMask",style:{bottom:0,left:0,right:0,top:0}}),n&&a.a.createElement("div",{className:"Spinner"},a.a.createElement("div",{className:"small"===r?"spinnerSmall":"spinnerMedium"})))}c.defaultProps={loading:!0,mask:!0,size:"medium"}},fvzG:function(e,t,n){"use strict";t.h=a,t.e=o,t.g=i,t.b=c,t.c=b,t.d=s,t.f=l,t.a=u,t.k=h,t.j=v,t.i=f;var r=n("THYI"),m=n.n(r);function a(e){return{type:"CONVERSATION_SHOW",payload:{id:e}}}function o(e){return{type:"CONVERSATION_HIDE",payload:{id:e}}}function i(e){return{type:"CONVERSATION_OPEN",payload:{id:e}}}function c(e){return{type:"CONVERSATION_CLOSE",payload:{id:e}}}function b(e){return{type:"CONVERSATION_CREATE",payload:e}}function s(e){return{type:"CONVERSATION_DELETE",payload:{id:e}}}function l(e,t){return{type:"CONVERSATION_MESSAGES_UPDATE",payload:{conversationId:e,messages:t}}}function u(){return function(e){var t;m.a.create("ConversationBadgeResource",{}).callDelete({showError:!1}),e({type:"CONVERSATION_BADGE_RESET"})}}function h(e,t){return{type:"MESSAGE_SEND_PENDING",payload:{id:e,message:t}}}function v(e,t,n){return{type:"MESSAGE_SEND_PENDING_CLEAR",payload:{id:e,messageId:t,newMessageId:n}}}var y=(d=0,function(){return d++}),d;function f(d,f,p){var e,t=new Promise(function(u){(e=function e(n,t){var r=f.text,a=f.pinId,o=f.boardId,i=f.userId,c=f.didItId,s=t();function l(){var e=m.a.create("ConversationMessagesResource",{conversation_id:d,text:r,pin:a,board:o,user:i,user_did_it_data:c,source:p}),t="".concat(y());e.callCreate().then(function(e){n(v(d,t,e.resource_response.data.id))}),n(h(d,{text:r,sender:s.viewer,created_at:(new Date).toString(),created_ms:Date.now(),id:t,board:null,event_type:null,pin:a?s.pins[a]:null,type:"message",user_did_it_data:null,user:null})),u()}s.conversations.data[d]?l():m.a.create("ConversationResource",{conversation_id:d}).callGet().then(function(e){var t=e&&e.resource_response&&e.resource_response.data;n(b(t)),l()})}).getPromise=function(){return t}});return e}},lVil:function(e,t,n){"use strict";var f=n("d6ZO"),p=n.n(f),r=n("DUIN"),m=n("5tOk"),b=n("W/Cr"),a=n("THYI"),h=n.n(a),c=n("fvzG"),v=n("gEaE");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?E(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=function(e){function o(){var e,r;i(this,o);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return w(E(E(r=u(this,(e=d(o)).call.apply(e,[this].concat(n))))),"state",{contactRequestCompleted:!1,isAccepted:!1,isAcceptButtonLoading:!1,isIgnoreButtonLoading:!1}),w(E(E(r)),"handleInviteAcceptResponse",function(){var e;r.setState({isAcceptButtonLoading:!0,isIgnoreButtonLoading:!1}),h.a.create("ContactRequestAcceptResource",{contact_request:r.props}).callUpdate().then(function(e){var t=r.props.dispatch;if(r.setState({isAccepted:!0,contactRequestCompleted:!0,isAcceptButtonLoading:!1}),e&&e.resource_response.data){var n=e.resource_response.data;t(Object(c.c)(n)),t(Object(c.h)(n.id)),t(Object(c.g)(n.id))}})}),w(E(E(r)),"handleInviteDeclineResponse",function(){var e=r.props.onDeclineRequest,t;r.setState({isAcceptButtonLoading:!1,isIgnoreButtonLoading:!0}),h.a.create("ContactRequestIgnoreResource",{contact_request:r.props}).callDelete().then(function(){r.setState({isAccepted:!1,contactRequestCompleted:!0,isIgnoreButtonLoading:!1}),e&&e()})}),r}return y(o,e),l(o,[{key:"renderRequestText",value:function e(t,n,r){if(t){var a=t.name,o=t.url;if(a&&o)return m.h(b.a._('<a href="/{{ senderUsername }}/">{{ senderName }}</a> invited you to collaborate on <a href="{{ boardUrl }}">{{ boardName }}</a>'),{boardName:a.toString(),boardUrl:o.toString(),senderName:n,senderUsername:r})}return m.h(b.a._('<a href="/{{ senderUsername }}/">{{ senderName }}</a> wants to send a message to you'),{senderName:n,senderUsername:r})}},{key:"renderAcceptedBoard",value:function e(){var t=this.props.board;if(!t)return null;var n=t.name,r=t.url,a=t.image_thumbnail_url;return p.a.createElement(v.t,{href:r},p.a.createElement(v.b,{paddingX:2,paddingY:4,display:"flex"},p.a.createElement(v.u,{shape:"rounded",width:50,height:50},p.a.createElement(v.p,{alt:n,src:a,naturalHeight:60,naturalWidth:60})),p.a.createElement(v.b,{paddingX:3,flex:"grow",display:"flex",direction:"column",justifyContent:"center"},p.a.createElement(v.K,{color:"darkGray",size:"sm",bold:!0,truncate:!0},n),p.a.createElement(v.K,{color:"darkGray",size:"sm"},b.a._("You joined this board","Status message for a group board the user has joined.")))))}},{key:"render",value:function e(){var t=this.props,n=t.board,r=t.sender,a=this.state,o=a.contactRequestCompleted,i=a.isAccepted,c=a.isAcceptButtonLoading,s=a.isIgnoreButtonLoading;if(o)return n&&i?this.renderAcceptedBoard():null;var l=r.image_large_url,u=r.full_name,d=r.username;return p.a.createElement(v.b,{paddingX:2,paddingY:4,display:"flex"},p.a.createElement(v.b,{height:40,width:40,flex:"none"},p.a.createElement(v.t,{href:"/"+d+"/"},p.a.createElement(v.a,{name:d,src:l}))),p.a.createElement(v.b,{paddingX:3,flex:"grow"},p.a.createElement(v.b,{marginBottom:3},p.a.createElement(v.K,null,p.a.createElement("span",{dangerouslySetInnerHTML:{__html:this.renderRequestText(n,u,d)}}))),p.a.createElement(v.b,{display:"flex",marginLeft:-1,marginRight:-1},p.a.createElement(v.b,{paddingX:1,flex:"grow"},p.a.createElement(v.c,{disabled:s,onClick:this.handleInviteDeclineResponse,size:"sm",text:b.a._("Decline","ignore contact request")})),p.a.createElement(v.b,{paddingX:1,flex:"grow"},p.a.createElement(v.c,{color:"red",disabled:c,onClick:this.handleInviteAcceptResponse,size:"sm",text:b.a._("Accept","accept contact request")})))))}}]),o}(f.PureComponent),C=Object(r.connect)()(_);function O(e){var t=e.contactRequests,n=e.onDeclineRequest;if(!t)return null;var r=t.filter(function(e){var t=e.board;return t&&t.name&&t.url}),a;return 0<r.length?p.a.createElement("div",null,r.map(function(e,t){return p.a.createElement("div",{key:e.id},0!==t?p.a.createElement(v.j,null):null,p.a.createElement(C,Object.assign({},e,{onDeclineRequest:n})))})):null}var k=n("nM9s"),I=n("IaRT"),S=n.n(I),j=n("U7FU"),N=function e(a,t){var n=t.emails,r=t.users,o=function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];if(t&&0!==t.length){var n=t[0];return p.a.createElement("div",{className:"contactWrapper"},p.a.createElement(j.a,{emails:[n],size:"small"}),p.a.createElement("div",{className:"contactTextInfo"},p.a.createElement("span",{className:"contactName"},n),p.a.createElement("span",{className:"contactDescription"},b.a._("Email friend","on selected contact list"))))}},i=function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],n=t[0].id===a?t[1]:t[0],r=n.full_name;return p.a.createElement("div",{className:"contactWrapper"},p.a.createElement(j.a,{size:"small",users:[n]}),p.a.createElement("div",{className:"contactTextInfo"},p.a.createElement("span",{className:"contactName"},r),p.a.createElement("span",{className:"contactDescription"},b.a._("On Pinterest","info about a contact"))))};return p.a.createElement("div",null,n&&0<n.length?o(n):i(r))};function R(e){var t=e.contactItem,n=e.currentUserID,r=e.conversationItem,a=e.handleContactWrapperClick,o=e.isSelected,i=e.isUser,c,s=["selectionIndicator","contactCircleRep","selectionIndicator"],l=e.isEnabledNewMessageExp?p.a.createElement(v.o,{accessibilityLabel:b.a._("selected checkmark"),bgColor:"transparentDarkGray",icon:"check",iconColor:"white",size:"xs"}):p.a.createElement("div",{className:s.join(" ")},p.a.createElement("em",null));return p.a.createElement("a",{className:"conversationContactContainer",key:r.id,onClick:function e(){return a(i,t)},onKeyDown:function e(){},role:"button",tabIndex:0},N(n,r),o?l:null)}R.defaultProps={isSelected:!1};var x=n("tZWC");function T(e){var n=e.onClickRemove,t=e.tokenizedItems;return f.createElement(v.b,{display:"flex",direction:"row",maxWidth:310,maxHeight:100,wrap:!0,dangerouslySetInlineStyle:{__style:{zIndex:1e3,overflowX:"hidden",overflowY:"auto"}}},t.map(function(e,t){return f.createElement(v.b,{color:"lightGray",shape:"pill",display:"flex",alignItems:"center",direction:"row",justifyContent:"between",width:136,paddingY:1,margin:1,key:"string"!=typeof e?e.id:e},f.createElement(v.b,{maxWidth:100,marginLeft:3},"string"!=typeof e?f.createElement(v.K,{truncate:!0},e.full_name):f.createElement(v.K,{truncate:!0},e)),f.createElement(v.o,{accessibilityLabel:b.a._("Cancel"),bgColor:"lightGray",icon:"cancel",iconColor:"darkGray",onClick:function e(){return n(t)},size:"xs"}))}))}function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e,t,n){return t&&B(e.prototype,t),n&&B(e,n),e}function D(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?U(e):t}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function M(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}function z(e,t){return(z=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var F=8,W=2,V=function(e){function a(){var e,d;A(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return H(U(U(d=D(this,(e=L(a)).call.apply(e,[this].concat(n))))),"state",{contactCounter:0,selectedEmails:{},selectedUsers:{},tokenizedItems:[],value:""}),H(U(U(d)),"onHandleContactClick",function(e,t){var n=d.state,r=n.selectedEmails,a=n.selectedUsers,o=e?a:r,i=e?t.id:t,c=o[i];o[i]=!c,c?d.removeTokenItem(t):d.addTokenItem(t)}),H(U(U(d)),"getSelectedEmails",function(){var t=d.state.selectedEmails;return Object.keys(t).filter(function(e){return t[e]})}),H(U(U(d)),"getSelectedUsers",function(){var t=d.state.selectedUsers;return Object.keys(t).filter(function(e){return t[e]})}),H(U(U(d)),"handleTypeaheadKeyDown",function(e){var t=d.state,n=t.contactCounter,r=t.selectedEmails,a=t.selectedUsers,o=t.tokenizedItems,i=t.value;if(8===e.keyCode&&n&&!i){var c=o.pop(),s,l,u;(!!c.id?a:r)[c.id||c]=!1,d.setState({contactCounter:n-1,tokenizedItems:o})}}),H(U(U(d)),"handleInviteItemClick",function(e,t){var n=d.state,r=n.selectedUsers,a=n.selectedEmails,o=t?r:a,i=e.id||e;o[i]||(o[i]=!0,d.addTokenItem(e))}),H(U(U(d)),"handleRemoveItem",function(e){var t=d.state.tokenizedItems[e];d.removeTokenItem(t)}),H(U(U(d)),"handleSendMessage",function(){var e=d.getSelectedEmails(),t=d.getSelectedUsers(),n=d.props.dispatch,r;h.a.create("ConversationsResource",{user_ids:t,emails:e,text:null}).callCreate().then(function(e){var t=e&&e.resource_response.data;n(Object(c.c)(t)),n(Object(c.h)(t.id)),n(Object(c.g)(t.id))})}),H(U(U(d)),"addTokenItem",function(e){var t=d.state,n=t.contactCounter,r=t.tokenizedItems;d.setState({contactCounter:n+1,tokenizedItems:r.concat([e]),value:""})}),H(U(U(d)),"removeTokenItem",function(t){var e=d.state,n=e.contactCounter,r=e.tokenizedItems,a=e.selectedUsers,o=e.selectedEmails,i,c,s;(!!t.id?a:o)[t.id||t]=!1,t.id?d.setState({contactCounter:n-1,tokenizedItems:r.filter(function(e){return e.id!==t.id})}):d.setState({contactCounter:n-1,tokenizedItems:(r||[]).filter(function(e){return e!==t})})}),H(U(U(d)),"renderSendMessageButton",function(){return p.a.createElement(k.a,{className:"sendNewMessageButton",hasText:!0,onClick:d.handleSendMessage,showText:!0,text:b.a._("Next","open the new chat"),type:"borderless"})}),H(U(U(d)),"renderCancelMessageButton",function(){var e=d.props.handleCancelNewMessageClick;return p.a.createElement(k.a,{className:"cancelNewMessageView cancelButton",hasText:!0,onClick:e,showText:!0,text:b.a._("Cancel","cancel new message view"),type:"borderless"})}),d}return M(a,e),q(a,[{key:"getContactItem",value:function e(t,n,r){var a=t.emails,o=t.users,i;return r&&o?o[0].id===n?o[1]:o[0]:a[0]}},{key:"render",value:function e(){var s=this,t=this.props,n=t.conversationItems,l=t.viewerId,r=this.state,a=r.contactCounter,u=r.selectedUsers,d=r.selectedEmails,o=r.value,f=new Set,i=n.map(function(e,t){var n=e.emails,r=e.users;n||(n=[]),r||(r=[]);var a=r.length+n.length;if(0<a&&a<=2){var o=0===n.length,i=s.getContactItem(e,l,o);if(i){var c=i.id||i;if(!f.has(c))return f.add(c),p.a.createElement(v.d,{key:c},p.a.createElement(R,{className:"conversationContactContainer",contactItem:i,conversationItem:e,currentUserID:l,handleContactWrapperClick:s.onHandleContactClick,isSelected:u[c]||d[c],isUser:o,isEnabledNewMessageExp:!0}))}}return null});return p.a.createElement(v.b,null,p.a.createElement(v.b,{display:"flex",justifyContent:"between",padding:3},p.a.createElement(v.K,{size:"lg",bold:!0},b.a._("New message","title for composing new message")),0<a?this.renderSendMessageButton():this.renderCancelMessageButton()),p.a.createElement(v.b,{display:"flex",marginLeft:2,marginRight:2,shape:"rounded",dangerouslySetInlineStyle:{__style:{border:"#efefef solid 2px",paddingLeft:3}}},p.a.createElement(v.b,{display:"flex",alignItems:"center",marginRight:2},p.a.createElement(v.K,{size:"sm",bold:!0,color:"gray",paddingY:1},b.a._("To:","Text field to type message recipient names"))),p.a.createElement(v.b,{display:"flex",position:"relative",flex:"grow",wrap:!0,direction:"column"},p.a.createElement(T,{tokenizedItems:this.state.tokenizedItems,onClickRemove:this.handleRemoveItem}),p.a.createElement(x.a,{changeOnTextHover:!1,className:"reactNewMessageTypeahead",onChange:function e(t){return s.setState({value:t})},onInviteItemClick:this.handleInviteItemClick,onKeyDown:this.handleTypeaheadKeyDown,showInputPlaceholder:!0,value:this.state.value,isComposeMessageExpEnabled:!0}))),o?null:p.a.createElement("div",{className:"contactsContainer",style:{margin:"8px 8px 0 8px"}},i))}}]),a}(f.Component),G=function e(t){var n;return{viewerId:t.viewer.id}},K=Object(r.connect)(G)(V),Y=n("GGB8"),X=n.n(Y),J=n("pN+K"),Z=100,Q=1e3,$=14;function ee(e){var t=e.contactCount,n=e.isInContactRequestsView,r=e.onClick,a;return t||n?(a=Q<t?b.a._("1000+ contact requests","messaging"):Z<=t&&t<=Q?b.a._("100+ contact requests","messaging"):m.h(b.a.ngettext("{{ contactCount }} contact request","{{ contactCount }} contact requests",t),{contactCount:"".concat(t)}),p.a.createElement(v.b,{dangerouslySetInlineStyle:{__style:{paddingLeft:14,paddingRight:14}},paddingY:1},p.a.createElement("div",{className:"Module ContactRequestsCount"},p.a.createElement(k.a,{className:X()({contactRequestView:n},"isBrioFlat","contactRequestsCount","btn"),hasIcon:n,hasText:!0,onClick:r,text:a,type:"borderless"})))):null}var te=Object(J.b)({name:"ContactRequestsCountGetResource",key:"contactCount"},{allowStale:!1})(ee);function ne(e){var t=e.contactRequests,n=e.handleCancelViewContactRequests;return t?p.a.createElement("div",{className:"Module ContactRequestsCount"},p.a.createElement(te,{contactCount:t.length,isInContactRequestsView:!0,onClick:n}),p.a.createElement(v.b,{padding:2},p.a.createElement(v.K,{size:"sm"},b.a._("These messages appear from people outside of your networks.","contact requests disclaimer"))),t.map(function(e,t){return p.a.createElement("div",{key:e.id},0!==t?p.a.createElement(v.j,null):null,p.a.createElement(C,e))})):null}var re=Object(J.b)({name:"ContactRequestsResource",key:"contactRequests"},{allowStale:!1})(ne),ae=n("tmfO");function oe(e){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function ie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function se(e,t,n){return t&&ce(e.prototype,t),n&&ce(e,n),e}function le(e,t){return!t||"object"!==oe(t)&&"function"!=typeof t?pe(e):t}function ue(e){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function de(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fe(e,t)}function fe(e,t){return(fe=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function pe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var be=function(e){function a(){var e,u;ie(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return me(pe(pe(u=le(this,(e=ue(a)).call.apply(e,[this].concat(n))))),"state",{boardInviteAccepted:!1,boardInvitePending:!0,isAcceptButtonLoading:!1,isIgnoreButtonLoading:!1}),me(pe(pe(u)),"handleInviteResponse",function(e){var t=u.props,n=t.boardInviteItem,r=t.onDeclineRequest,a=n.board,o=void 0===a?{}:a,i=n.invited_user,c=void 0===i?{}:i;u.setState({isAcceptButtonLoading:e,isIgnoreButtonLoading:!e});var s={board_id:o.id,invited_user_id:c.id},l=h.a.create("BoardInviteResource",s);(e?l.callUpdate():l.callDelete()).then(function(){u.setState({boardInviteAccepted:e,boardInvitePending:!1,isAcceptButtonLoading:!1,isIgnoreButtonLoading:!1}),e||r()})}),u}return de(a,e),se(a,[{key:"getBoardRep",value:function e(t,n){return p.a.createElement(ae.b,{to:n,inline:!0},p.a.createElement(v.u,{width:40,height:40,shape:"rounded"},p.a.createElement(v.p,{alt:"",color:"",naturalWidth:40,naturalHeight:40,src:n,fit:"cover"})))}},{key:"getBoardInfo",value:function e(t,n){return p.a.createElement(ae.b,{to:n},p.a.createElement(v.K,{bold:!0},t))}},{key:"getInviteeInfo",value:function e(t){var n=t.full_name;return Object(m.h)(b.a._("{{ fullName }} invited you to this board"),{fullName:n})}},{key:"getRequesterInfo",value:function e(t){var n=t.username,r=t.full_name,a;return Object(m.h)(b.a._("{{ fullName }} wants to join your board"),{fullName:r,username:n})}},{key:"getJoinedText",value:function e(t){var n=t.username,r=t.full_name;return Object(m.h)(b.a._("{{ fullName }} joined your board"),{fullName:r,username:n})}},{key:"render",value:function e(){var t=this;if(!this.state.boardInvitePending&&!this.state.boardInviteAccepted)return null;var n=this.props.boardInviteItem,r=n.board,a=n.invited_by_user,o=n.invited_user,i=r.image_cover_url,c=r.name,s=r.url,l=a.id===o.id,u=l?s+"invite":s;return p.a.createElement("div",{className:"BoardInvite Module news"},p.a.createElement(v.b,{paddingX:2,display:"flex",direction:"row",paddingY:4},this.getBoardRep(c,i),p.a.createElement(v.b,{paddingX:3,flex:"grow"},p.a.createElement(v.b,{marginBottom:3},p.a.createElement(ae.b,{to:u},p.a.createElement(v.K,{size:"sm",bold:!0},c)),this.state.boardInvitePending?p.a.createElement(v.K,{size:"sm"},l?this.getRequesterInfo(a):this.getInviteeInfo(a)):p.a.createElement(v.K,{size:"sm"},l?this.getJoinedText(a):b.a._("You joined this board","board invites"))),this.state.boardInvitePending&&p.a.createElement(v.b,{display:"flex",marginStart:-1,marginEnd:-1},p.a.createElement(v.b,{flex:"grow",paddingX:1},p.a.createElement(v.c,{disabled:this.state.isIgnoreButtonLoading,onClick:function e(){return t.handleInviteResponse(!1)},text:b.a._("Decline","decline board collaborator invite or request"),size:"sm"})),p.a.createElement(v.b,{flex:"grow",paddingX:1},p.a.createElement(v.c,{color:"red",disabled:this.state.isAcceptButtonLoading,onClick:function e(){return t.handleInviteResponse(!0)},text:b.a._("Accept","accept board invite"),size:"sm"}))))))}}]),a}(f.Component),he=n("FfPm");function ve(e){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ee(e,t,n){return t&&ge(e.prototype,t),n&&ge(e,n),e}function we(e,t){return!t||"object"!==ve(t)&&"function"!=typeof t?ke(e):t}function _e(e){return(_e=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function Ce(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oe(e,t)}function Oe(e,t){return(Oe=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function ke(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Se=function(e){function o(){var e,r;ye(this,o);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Ie(ke(ke(r=we(this,(e=_e(o)).call.apply(e,[this].concat(n))))),"state",{contactRequestCompleted:!1,isAccepted:!1,isAcceptButtonLoading:!1,isIgnoreButtonLoading:!1}),Ie(ke(ke(r)),"handleInviteAcceptResponse",function(){var e;r.setState({isAcceptButtonLoading:!0,isIgnoreButtonLoading:!1}),h.a.create("ContactRequestAcceptResource",{contact_request:r.props}).callUpdate().then(function(e){var t=r.props.dispatch;if(r.setState({isAccepted:!0,contactRequestCompleted:!0,isAcceptButtonLoading:!1}),e&&e.resource_response.data){var n=e.resource_response.data;t(Object(c.c)(n)),t(Object(c.h)(n.id)),t(Object(c.g)(n.id))}})}),Ie(ke(ke(r)),"handleInviteDeclineResponse",function(){var e=r.props.onDeclineRequest,t;r.setState({isAcceptButtonLoading:!1,isIgnoreButtonLoading:!0}),h.a.create("ContactRequestIgnoreResource",{contact_request:r.props}).callDelete().then(function(){r.setState({isAccepted:!1,contactRequestCompleted:!0,isIgnoreButtonLoading:!1}),e()})}),r}return Ce(o,e),Ee(o,[{key:"renderRequestText",value:function e(t,n){if(t){var r=t.name,a=t.url;if(r&&a)return m.h(b.a._("{{ senderName }} invited you to this board"),{senderName:n})}return m.h(b.a._("{{ senderName }} wants to send a message to you"),{senderName:n})}},{key:"renderAcceptedBoard",value:function e(){var t=this.props.board;if(!t)return null;var n=t.name,r=t.url,a=t.image_thumbnail_url;return p.a.createElement(v.t,{href:r},p.a.createElement(v.b,{paddingX:2,paddingY:4,display:"flex"},p.a.createElement(v.u,{shape:"rounded",width:50,height:50},p.a.createElement(v.p,{alt:n,src:a,naturalHeight:60,naturalWidth:60})),p.a.createElement(v.b,{paddingX:3,flex:"grow",display:"flex",direction:"column",justifyContent:"center"},p.a.createElement(v.K,{color:"darkGray",size:"sm",bold:!0,truncate:!0},n),p.a.createElement(v.K,{color:"darkGray",size:"sm"},b.a._("You joined this board","Status message for a group board the user has joined.")))))}},{key:"render",value:function e(){var t=this.props,n=t.board,r=t.sender,a=this.state,o=a.contactRequestCompleted,i=a.isAccepted,c=a.isAcceptButtonLoading,s=a.isIgnoreButtonLoading;if(o)return n&&i?this.renderAcceptedBoard():null;var l=r.image_large_url,u=r.full_name,d=r.username;return p.a.createElement(v.b,{paddingX:2,paddingY:4,display:"flex",direction:"row"},p.a.createElement(v.b,{height:40,width:40,flex:"none"},p.a.createElement(v.t,{href:"/"+d+"/",onClick:function e(){return he.default.increment("web.social.contact_request.profile_nav")}},p.a.createElement(v.a,{name:d,src:l}))),p.a.createElement(v.b,{paddingX:3,flex:"grow"},p.a.createElement(v.b,{marginBottom:3},n?p.a.createElement(v.t,{href:n.url},p.a.createElement(v.K,{bold:!0,size:"sm"},n.name)):p.a.createElement(v.t,{href:"".concat(d),onClick:function e(){return he.default.increment("web.social.contact_request.profile_nav")}},p.a.createElement(v.K,{bold:!0,size:"sm"},u)),p.a.createElement(v.K,{size:"sm"},this.renderRequestText(n,u))),p.a.createElement(v.b,{display:"flex",marginLeft:-1,marginRight:-1},p.a.createElement(v.b,{paddingX:1,flex:"grow"},p.a.createElement(v.c,{disabled:s,onClick:this.handleInviteDeclineResponse,size:"sm",text:b.a._("Decline","ignore contact request")})),p.a.createElement(v.b,{paddingX:1,flex:"grow"},p.a.createElement(v.c,{color:"red",disabled:c,onClick:this.handleInviteAcceptResponse,size:"sm",text:b.a._("Accept","accept contact request")})))))}}]),o}(f.PureComponent),je=Object(r.connect)()(Se),Ne=n("JyNp"),Re=n("MQ2h"),xe=n.n(Re),Te=n("suNN");function Pe(e){return qe(e)||Be(e)||Ae()}function Ae(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function Be(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function qe(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}var De=function e(t,n){return t.created_at&&n.created_at?new Date(t.created_at)>new Date(n.created_at)?-1:1:0};function Le(e){var t=e.boardJoinRequests,n=e.boardInvites,r=e.contactRequests,a=e.onClick,o=e.showAllRequests,i=e.handleCancelViewContactRequests;if(!t.isLoaded&&!t.isLoaded&&!t.isLoaded)return null;var c=Pe(t.data||[]).concat(Pe(n.data||[]),Pe(r.data||[])),s=function e(){r.refreshData()},l=function e(){n.refreshData(),t.refreshData()};c.sort(De);var u=!o&&2<c.length,d=u?c.slice(0,2):c;return f.createElement(f.Fragment,null,o&&f.createElement(v.b,{paddingX:2,paddingY:2,display:"flex",direction:"row",alignItems:"center",justifyContent:"between"},f.createElement(v.b,{column:2},f.createElement(v.o,{icon:"arrow-back",accessibilityLabel:b.a._("Back to inbox","Icon to exit messages feed and go back to inbox"),onClick:i})),f.createElement(v.b,{column:8,overflow:"hidden"},f.createElement(v.K,{bold:!0,align:"center",truncate:!0},b.a._("Requests","Heading for the requests feed, which includes contact requests, board invites, and board join requests"))),f.createElement(v.b,{flex:"grow",column:2})),d.map(function(e){var t=e.type,n=e.id;return"contactrequest"===t?f.createElement(je,Object.assign({},e,{key:n,onDeclineRequest:s})):"collaboratorinvite"===t?f.createElement(be,{boardInviteItem:e,key:n,onDeclineRequest:l}):null}),u&&f.createElement(v.b,{width:"100%",paddingX:2,paddingY:2,marginTop:-1},f.createElement(v.c,{text:Object(Te.b)(b.a._("See all {{ n }} invites"),{n:c.length}).join(""),size:"sm",color:"white",onClick:a})),f.createElement(v.j,null))}var Me=Object(Re.compose)(Object(Ne.b)({name:"ContactRequestsResource",key:"contactRequests"},{allowStale:!1}),Object(Ne.b)({name:"BoardOwnerCollaboratorJoinRequestsResource",key:"boardJoinRequests",options:function e(t){return{field_set_key:"news"}}},{allowStale:!1}),Object(Ne.b)({name:"BoardInvitesResource",key:"boardInvites",options:function e(t){return{current_user:!0,field_set_key:"news"}}},{allowStale:!1}))(Le),ze=n("/S3G"),Ue=n("woYD");function He(e){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function Fe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function We(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ve(e,t,n){return t&&We(e.prototype,t),n&&We(e,n),e}function Ge(e,t){return!t||"object"!==He(t)&&"function"!=typeof t?Je(e):t}function Ke(e){return(Ke=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function Ye(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xe(e,t)}function Xe(e,t){return(Xe=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function Je(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qe(e){var t=e.name,n=e.emails,r=e.users,a=e.viewerId,o=r.filter(function(e){return e.id!==a});return p.a.createElement(v.b,{dangerouslySetInlineStyle:{__style:{paddingBottom:4}}},p.a.createElement(v.K,{color:"darkGray",size:"sm",bold:!0,truncate:!0},t||o.map(function(e){return e.first_name||e.full_name}).concat(n).join(", ")))}function $e(e){var t=e.message,n=e.viewerId,r=t.board,a=t.created_at,o=t.pin,i=t.sender,c=t.text,s=t.user,l=c,u=i.id===n,d=u?b.a._("You","messaging in the inbox, when the viewer(You) sends a pin, board, or profile to another user without text"):i.first_name;return l?l&&u&&(l=b.a._("You","messaging in the inbox, when the viewer(You) sends a message to another user")+": "+l):o?l=m.h(b.a._("{{ senderName }} sent a Pin","messaging"),{senderName:d}):r?l=m.h(b.a._("{{ senderName }} sent a board","messaging"),{senderName:d}):s&&(l=m.h(b.a._("{{ senderName }} sent a user profile","messaging"),{senderName:d})),p.a.createElement(v.b,{display:"flex",direction:"row",flex:"grow",alignItems:"baseline"},p.a.createElement(v.b,{marginRight:2,flex:"shrink",dangerouslySetInlineStyle:{__style:{maxWidth:"80%"}}},p.a.createElement(v.K,{color:"darkGray",size:"sm",truncate:!0},l)),p.a.createElement(v.b,{flex:"none"},p.a.createElement(v.K,{color:"gray",size:"xs",truncate:!0},b.a.getHumanizedTimesince(a,!0))))}function et(e){var t=e.board,n=e.pin,r=e.user,a=null;if(n){var o=n.images["236x"]||n.images["136x136"];a=p.a.createElement(v.u,{shape:"rounded",wash:!0,height:60,width:40},p.a.createElement(v.p,{alt:"",src:o.url,naturalWidth:o.width,naturalHeight:o.height,color:n.dominant_color,fit:"cover"}))}else t?a=p.a.createElement(v.u,{shape:"rounded",width:40,height:40},p.a.createElement(v.p,{alt:"",src:t.image_thumbnail_url||"",naturalWidth:60,naturalHeight:60})):r&&(a=p.a.createElement(v.b,{shape:"rounded",width:40,height:40},p.a.createElement(v.a,{name:r.full_name,src:r.image_large_url})));return a?p.a.createElement(v.b,{display:"flex",alignItems:"center",width:30,marginLeft:5,marginRight:6},p.a.createElement(v.b,{display:"block"},a)):null}var tt=function(e){function a(){var e,i;Fe(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ze(Je(Je(i=Ge(this,(e=Ke(a)).call.apply(e,[this].concat(n))))),"state",{isAnimatingOut:!1,unread:i.props.data.unread||0}),Ze(Je(Je(i)),"handleHideConversation",function(e){e.stopPropagation();var t=i.props,n=t.data,r=t.dispatch,a=n.id,o;h.a.create("ConversationResource",{conversation_id:a}).callDelete({showError:!1}),i.setState({isAnimatingOut:!0}),setTimeout(function(){r(Object(c.d)(a))},500),i.removeConversationChatHead(a),i.logConversationItemHide(a)}),Ze(Je(Je(i)),"handleConversationItemClick",function(){var e=i.props.data;i.setState({unread:0}),e.board||i.showConversationChatHead(e),i.logConversationItemClick()}),Ze(Je(Je(i)),"logConversationItemClick",function(){Object(Ue.a)(101,{component:54,element:277})}),Ze(Je(Je(i)),"logConversationItemHide",function(e){Object(Ue.a)(182,{component:54,element:277,conversation_id:e})}),i}return Ye(a,e),Ve(a,[{key:"showConversationChatHead",value:function e(t){var n=this.props.dispatch,r=t.id;n(Object(c.h)(r)),n(Object(c.g)(r)),n(ze.a)}},{key:"removeConversationChatHead",value:function e(t){var n=this.props.dispatch;n(Object(c.e)(t)),n(Object(c.b)(t))}},{key:"renderItemContent",value:function e(){var t=this.state.isAnimatingOut,n=this.props,r=n.data,a=n.viewerId,o=r.board,i=r.emails,c=r.last_message,s=r.name,l=r.users,u=i||[];return p.a.createElement("div",{className:X()("ConversationListItemReact",{conversationHidden:t})},p.a.createElement(v.b,{display:"flex",alignItems:"center",dangerouslySetInlineStyle:{__style:{marginRight:10}}},p.a.createElement(j.a,{board:o,emails:u,users:l})),p.a.createElement(v.b,{display:"flex",width:"85%",height:"100%"},p.a.createElement(v.b,{flex:"grow",display:"flex",direction:"column",height:"100%",paddingY:2,maxWidth:"233"},p.a.createElement(Qe,{name:s,emails:i||[],users:l,viewerId:a}),p.a.createElement(v.b,{flex:"grow",display:"flex",direction:"column"},c?p.a.createElement($e,{message:c,viewerId:a}):null)),c?p.a.createElement(et,c):null),0<this.state.unread?p.a.createElement("span",{className:"conversationUnreadMark"}):null,p.a.createElement(k.a,{className:"conversationCloseButton",hasText:!0,onClick:this.handleHideConversation,text:b.a._("×","close button"),type:"borderless"}))}},{key:"render",value:function e(){var t=this.props.data,n=t.board,r=t.users;return r&&r.length?n?p.a.createElement(ae.b,{onClick:this.handleConversationItemClick,to:n.url},this.renderItemContent()):p.a.createElement("div",{onClick:this.handleConversationItemClick,role:"button"},this.renderItemContent()):null}}]),a}(f.Component);function nt(e){var t;return{viewerId:e.viewer.id}}var rt=Object(r.connect)(nt)(tt);function at(e){var n=e.onClickRemove,t=e.tokenizedItems;return f.createElement("div",{className:"reactTokenizedInputContainer",style:{zIndex:1e3}},f.createElement("div",{className:"tokenContainer"},t.map(function(e,t){return f.createElement("div",{className:"tokenItem",key:t,style:{position:"relative"}},f.createElement(k.a,{className:"tokenRemove",onClick:function e(){return n(t)},showText:!1,text:b.a._("close conversation chathead"),type:"borderless"},f.createElement(v.b,{position:"absolute",color:"lightGray",display:"flex",alignItems:"center",justifyContent:"center",width:12,height:12,dangerouslySetInlineStyle:{__style:{borderRadius:6}}},f.createElement(v.n,{icon:"cancel",accessibilityLabel:"",size:5,color:"darkGray"}))),"string"!=typeof e?f.createElement(v.a,{size:"sm",name:e.full_name,src:e.is_default_image?void 0:e.image_large_url}):f.createElement(v.a,{size:"sm",name:e}))}),0<t.length?f.createElement(v.b,{width:5}):null),f.createElement("div",{className:"textFieldContainer"}))}function ot(e){return(ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function it(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function st(e,t,n){return t&&ct(e.prototype,t),n&&ct(e,n),e}function lt(e,t){return!t||"object"!==ot(t)&&"function"!=typeof t?pt(e):t}function ut(e){return(ut=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function dt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ft(e,t)}function ft(e,t){return(ft=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function pt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var bt=8,ht=2,vt=function(e){function a(){var e,d;it(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return mt(pt(pt(d=lt(this,(e=ut(a)).call.apply(e,[this].concat(n))))),"state",{contactCounter:0,selectedEmails:{},selectedUsers:{},tokenizedItems:[],value:""}),mt(pt(pt(d)),"onHandleContactClick",function(e,t){var n=d.state,r=n.selectedEmails,a=n.selectedUsers,o=e?a:r,i=e?t.id:t,c=o[i];o[i]=!c,c?d.removeTokenItem(t):d.addTokenItem(t)}),mt(pt(pt(d)),"getSelectedEmails",function(){var t=d.state.selectedEmails;return Object.keys(t).filter(function(e){return t[e]})}),mt(pt(pt(d)),"getSelectedUsers",function(){var t=d.state.selectedUsers;return Object.keys(t).filter(function(e){return t[e]})}),mt(pt(pt(d)),"handleTypeaheadKeyDown",function(e){var t=d.state,n=t.contactCounter,r=t.selectedEmails,a=t.selectedUsers,o=t.tokenizedItems,i=t.value;if(8===e.keyCode&&n&&!i){var c=o.pop(),s,l,u;(!!c.id?a:r)[c.id||c]=!1,d.setState({contactCounter:n-1,tokenizedItems:o})}}),mt(pt(pt(d)),"handleInviteItemClick",function(e,t){var n=d.state,r=n.selectedUsers,a=n.selectedEmails,o=t?r:a,i=e.id||e;o[i]||(o[i]=!0,d.addTokenItem(e))}),mt(pt(pt(d)),"handleRemoveItem",function(e){var t=d.state.tokenizedItems[e];d.removeTokenItem(t)}),mt(pt(pt(d)),"handleSendMessage",function(){var e=d.getSelectedEmails(),t=d.getSelectedUsers(),n=d.props.dispatch,r;h.a.create("ConversationsResource",{user_ids:t,emails:e,text:null}).callCreate().then(function(e){var t=e&&e.resource_response.data;n(Object(c.c)(t)),n(Object(c.h)(t.id)),n(Object(c.g)(t.id))})}),mt(pt(pt(d)),"addTokenItem",function(e){var t=d.state,n=t.contactCounter,r=t.tokenizedItems;d.setState({contactCounter:n+1,tokenizedItems:r.concat([e]),value:""})}),mt(pt(pt(d)),"removeTokenItem",function(t){var e=d.state,n=e.contactCounter,r=e.tokenizedItems,a=e.selectedUsers,o=e.selectedEmails,i,c,s;(!!t.id?a:o)[t.id||t]=!1,t.id?d.setState({contactCounter:n-1,tokenizedItems:r.filter(function(e){return e.id!==t.id})}):d.setState({contactCounter:n-1,tokenizedItems:(r||[]).filter(function(e){return e!==t})})}),mt(pt(pt(d)),"renderSendMessageButton",function(){return p.a.createElement(k.a,{className:"sendNewMessageButton",hasText:!0,onClick:d.handleSendMessage,showText:!0,text:b.a._("Next","open the new chat"),type:"borderless"})}),mt(pt(pt(d)),"renderCancelMessageButton",function(){var e=d.props.handleCancelNewMessageClick;return p.a.createElement(k.a,{className:"cancelNewMessageView cancelButton",hasText:!0,onClick:e,showText:!0,text:b.a._("Cancel","cancel new message view"),type:"borderless"})}),d}return dt(a,e),st(a,[{key:"getContactItem",value:function e(t,n,r){var a=t.emails,o=t.users,i;return r&&o?o[0].id===n?o[1]:o[0]:a[0]}},{key:"render",value:function e(){var s=this,t=this.props,n=t.conversationItems,l=t.viewerId,r=this.state,a=r.contactCounter,u=r.selectedUsers,d=r.selectedEmails,o=r.value,f=new Set,i=n.map(function(e,t){var n=e.emails,r=e.users;n||(n=[]),r||(r=[]);var a=r.length+n.length;if(0<a&&a<=2){var o=0===n.length,i=s.getContactItem(e,l,o);if(i){var c=i.id||i;if(!f.has(c))return f.add(c),p.a.createElement(R,{className:"conversationContactContainer",contactItem:i,conversationItem:e,currentUserID:l,handleContactWrapperClick:s.onHandleContactClick,isSelected:u[c]||d[c],isUser:o,key:c+"-".concat(t),isEnabledNewMessageExp:!1})}}return null});return p.a.createElement("div",null,p.a.createElement(v.b,{display:"flex",justifyContent:"between",padding:3},p.a.createElement(v.K,{size:"sm",color:"gray"},b.a._("New message","conversations")),0<a?this.renderSendMessageButton():this.renderCancelMessageButton()),p.a.createElement(v.b,{color:"lightGray",display:"flex",padding:3},p.a.createElement(v.b,{display:"flex",alignItems:"center",marginRight:2},p.a.createElement(v.K,{size:"sm"},b.a._("To:","new message"))),p.a.createElement(v.b,{display:"flex",position:"relative",flex:"grow"},p.a.createElement(at,{tokenizedItems:this.state.tokenizedItems,onClickRemove:this.handleRemoveItem}),p.a.createElement(x.a,{changeOnTextHover:!1,className:"reactNewMessageTypeahead",onChange:function e(t){return s.setState({value:t})},onInviteItemClick:this.handleInviteItemClick,onKeyDown:this.handleTypeaheadKeyDown,showInputPlaceholder:!1,value:this.state.value}))),o?null:p.a.createElement("div",{className:"contactsContainer"},i))}}]),a}(f.Component),yt=function e(t){var n;return{viewerId:t.viewer.id}},gt=Object(Re.compose)(Object(r.connect)(yt))(vt);function Et(e){return(Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function wt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ct(e,t,n){return t&&_t(e.prototype,t),n&&_t(e,n),e}function Ot(e,t){return!t||"object"!==Et(t)&&"function"!=typeof t?jt(e):t}function kt(e){return(kt=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function It(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&St(e,t)}function St(e,t){return(St=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function jt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Rt=function(e){function a(){var e,u;wt(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Nt(jt(jt(u=Ot(this,(e=kt(a)).call.apply(e,[this].concat(n))))),"state",{boardInviteAccepted:!1,boardInvitePending:!0,isAcceptButtonLoading:!1,isIgnoreButtonLoading:!1}),Nt(jt(jt(u)),"handleInviteResponse",function(e){var t=u.props,n=t.boardInviteItem,r=t.onDeclineRequest,a=n.board,o=void 0===a?{}:a,i=n.invited_user,c=void 0===i?{}:i;u.setState({isAcceptButtonLoading:e,isIgnoreButtonLoading:!e});var s={board_id:o.id,invited_user_id:c.id},l=h.a.create("BoardInviteResource",s);(e?l.callUpdate():l.callDelete()).then(function(){u.setState({boardInviteAccepted:e,boardInvitePending:!1,isAcceptButtonLoading:!1,isIgnoreButtonLoading:!1}),!e&&r&&r()})}),u}return It(a,e),Ct(a,[{key:"getBoardRep",value:function e(t,n){return p.a.createElement("div",{className:"leftObjectWrapper boardRepWrapper"},p.a.createElement("div",{className:"Image Module boardMessageRep"},p.a.createElement("div",{className:"heightContainer"},p.a.createElement("img",{alt:t,src:n}))))}},{key:"getBoardInfo",value:function e(t,n){return p.a.createElement("a",{href:n},p.a.createElement("div",{className:t},t))}},{key:"getInviteeInfo",value:function e(t){var n=t.full_name;return p.a.createElement("div",{className:"inviterLine"},Object(m.h)(b.a._("{{ fullName }} invited you to this board"),{fullName:n}))}},{key:"getRequesterInfo",value:function e(t){var n=t.username,r=t.full_name,a=Object(m.h)(b.a._('<a href="/{{ username }}/">{{ fullName }}</a> wants to join your board'),{fullName:r,username:n});return p.a.createElement("div",{className:"requesterLine"},p.a.createElement("span",{dangerouslySetInnerHTML:{__html:a}}))}},{key:"getJoinedText",value:function e(t){var n=t.username,r=t.full_name,a=Object(m.h)(b.a._('<a href="/{{ username }}/">{{ fullName }}</a> joined your board'),{fullName:r,username:n});return p.a.createElement("div",{className:"requesterLine"},p.a.createElement("span",{dangerouslySetInnerHTML:{__html:a}}))}},{key:"renderPendingLayout",value:function e(t,n,r){var a=this,o=t.image_thumbnail_url,i=t.name,c=t.url,s=r?c+"invite":c;return p.a.createElement("div",{className:"pending"},p.a.createElement("div",{className:"left"},this.getBoardRep(i,o),p.a.createElement("div",{className:"description"},this.getBoardInfo(i,s),r?this.getRequesterInfo(n):this.getInviteeInfo(n))),p.a.createElement("div",{className:"actions"},p.a.createElement(k.a,{className:"remove",loading:this.state.isIgnoreButtonLoading,onClick:function e(){return a.handleInviteResponse(!1)},text:b.a._("Decline","decline board collaborator invite or request")}),p.a.createElement(k.a,{className:X()("primary","accept"),loading:this.state.isAcceptButtonLoading,onClick:function e(){return a.handleInviteResponse(!0)},text:b.a._("Accept","accept board invite")})))}},{key:"renderCompletedLayout",value:function e(t,n,r){var a=t.image_thumbnail_url,o=t.name,i=t.url;return p.a.createElement("div",{className:"success displayed"},p.a.createElement("div",{className:"left"},this.getBoardRep(o,a),p.a.createElement("div",{className:"description"},this.getBoardInfo(o,i),p.a.createElement("div",{className:"inviterLine"},r?this.getJoinedText(n):b.a._("You joined this board","board invites")))))}},{key:"render",value:function e(){if(!this.state.boardInvitePending&&!this.state.boardInviteAccepted)return null;var t=this.props.boardInviteItem,n=t.board,r=t.invited_by_user,a=t.invited_user,o=r.id===a.id;return p.a.createElement("div",{className:"BoardInvite Module news"},this.state.boardInvitePending?this.renderPendingLayout(n,r,o):this.renderCompletedLayout(n,r,o))}}]),a}(f.Component);function xt(e){var t=e.boardInvites,n=e.boardJoinRequests,r=e.onDeclineRequest;return t||n?p.a.createElement("div",null,n?n.map(function(e){return p.a.createElement(v.b,{key:e.id},p.a.createElement(Rt,{boardInviteItem:e,onDeclineRequest:r}),p.a.createElement(v.j,null))}):null,t?t.map(function(e){return p.a.createElement(v.b,{key:e.id},p.a.createElement(Rt,{boardInviteItem:e,onDeclineRequest:r}),p.a.createElement(v.j,null))}):null):null}var Tt=n("nX0T"),Pt=n("6oz1");function At(e){return(At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function Bt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dt(e,t,n){return t&&qt(e.prototype,t),n&&qt(e,n),e}function Lt(e,t){return!t||"object"!==At(t)&&"function"!=typeof t?Ht(e):t}function Mt(e){return(Mt=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function zt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ut(e,t)}function Ut(e,t){return(Ut=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function Ht(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ft(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Wt=500,Vt="existingConversationsView",Gt="newMessageView",
Kt="contactRequestsView",Yt="enabled_top_left",Xt="enabled_on_the_bottom",Jt="enabled_employees",Zt=function(e){function o(){var e,r;Bt(this,o);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Ft(Ht(Ht(r=Lt(this,(e=Mt(o)).call.apply(e,[this].concat(n))))),"state",{currentView:Vt,hoverColor:"transparent"}),Ft(Ht(Ht(r)),"handleCancelSecondaryView",function(){r.setState({currentView:Vt})}),Ft(Ht(Ht(r)),"handleNewMessageButtonClick",function(){r.setState({currentView:Gt}),r.logNewMessageButtonClick()}),Ft(Ht(Ht(r)),"handleViewContactRequestsClick",function(){r.setState({currentView:Kt})}),Ft(Ht(Ht(r)),"handleScroll",function(){var e,t;r.props.isFetching||(r._container&&r._container.scrollHeight-r._container.scrollTop-r._container.clientHeight)<Wt&&r.fetchMore()}),Ft(Ht(Ht(r)),"handleMouseHoverSVG",function(){r.setState({hoverColor:"rgba(0, 0, 0, 0.06)"})}),Ft(Ht(Ht(r)),"handleMouseLeaveSVG",function(){r.setState({hoverColor:"transparent"})}),Ft(Ht(Ht(r)),"logNewMessageButtonClick",function(){Object(Ue.a)(101,{component:54,element:275})}),Ft(Ht(Ht(r)),"handleDismiss",function(){var e=r.props.onDismiss;he.default.increment("web_messaging.close_from_conversation_panel"),e()}),Ft(Ht(Ht(r)),"handleBoardInvitesDidUpdate",function(){var e=r.props,t=e.boardInvites,n=e.boardJoinRequests;t.refreshData(),n.refreshData()}),Ft(Ht(Ht(r)),"handleContactRequestsDidUpdate",function(){var e;r.props.contactRequests.refreshData()}),r}return zt(o,e),Dt(o,[{key:"componentDidMount",value:function e(){var t;this.props.isFullAuth&&this._container.addEventListener("scroll",this.handleScroll),Object(Ue.a)(7161,{})}},{key:"componentWillUnmount",value:function e(){this._container.removeEventListener("scroll",this.handleScroll)}},{key:"fetchMore",value:function e(){var t=this.props,n=t.isAtEnd,r=t.isFetching,a=t.fetchMoreData,o=t.isFullAuth;!r&&o&&(n?this._container.removeEventListener("scroll",this.handleScroll):a())}},{key:"renderNewMessageView",value:function e(){var n=this,t=this.props.conversations,r=void 0===t?[]:t;return p.a.createElement("div",{className:"newMessageContainer"},p.a.createElement(Pt.b,{name:"web_new_message_names"},function(e){var t=e.group;return["employees","enabled"].includes(t)?p.a.createElement(K,{conversationItems:r,handleCancelNewMessageClick:n.handleCancelSecondaryView}):p.a.createElement(gt,{conversationItems:r,handleCancelNewMessageClick:n.handleCancelSecondaryView})}))}},{key:"renderContactRequestsView",value:function e(){var t=this.props.activateContactRequestsInboxExperiment,n;return["employees","enabled"].includes(t()||"")?p.a.createElement(Me,{showAllRequests:!0,handleCancelViewContactRequests:this.handleCancelSecondaryView}):p.a.createElement("div",{className:"contactRequestsContainer"},p.a.createElement(re,{handleCancelViewContactRequests:this.handleCancelSecondaryView}))}},{key:"renderEmptyMessagesNewMessageUpsell",value:function e(){var n=this;return this.shouldShowEmptyState&&p.a.createElement(Pt.b,{name:"web_compose_message_button_position"},function(e){var t;return e.anyEnabled?n.renderOldEmptyState():p.a.createElement(Pt.b,{name:"web_empty_state_for_inbox"},function(e){var t;return e.anyEnabled?n.renderNewEmptyState():n.renderOldEmptyState()})})}},{key:"renderOldEmptyState",value:function e(){return p.a.createElement("div",{className:"EmptyConversations Module"},p.a.createElement("div",{className:"icon"}),p.a.createElement("div",{className:"intro"},p.a.createElement("div",null,b.a._("Send messages to your friends!")),p.a.createElement("div",null,b.a._("Plan projects, swap ideas and share your best discoveries."))))}},{key:"renderNewEmptyState",value:function e(){return p.a.createElement(v.b,{marginTop:12,padding:12,alignItems:"start"},p.a.createElement(v.m,{size:"sm",color:"darkGray"},b.a._("Share ideas with your friends","introduction message when inbox is empty")),p.a.createElement(v.b,{marginTop:6},p.a.createElement(v.c,{text:b.a._("New message","compose button for inbox empty state"),onClick:this.handleNewMessageButtonClick,size:"md",color:"red",accessibilityLabel:b.a._("composeNewMessage","accessibility label for compose button when inbox is empty"),inline:!0})))}},{key:"renderExistingConversationsView",value:function e(){var o=this,t=this.props,n=t.conversations,i=void 0===n?[]:n,c=t.isAtEnd,r=t.activateContactRequestsInboxExperiment,s=t.boardJoinRequests,l=t.boardInvites,u=t.contactRequests,d=["employees","enabled"].includes(r()||"");return p.a.createElement(Pt.b,{name:"web_compose_message_button_position"},function(e){var t=e.group,n=t.startsWith("enabled"),r=t.startsWith(Xt)||t.startsWith(Jt),a=t.startsWith(Yt);return p.a.createElement("div",{className:"existingConversationsContainer"},p.a.createElement(v.b,{position:"relative"},p.a.createElement(v.b,{position:"absolute",right:!0,dangerouslySetInlineStyle:{__style:{padding:10}}},n?p.a.createElement(v.o,{onClick:o.handleDismiss,icon:"cancel",iconColor:"gray",size:"sm",accessibilityLabel:b.a._("closeConversationPanel","accessibility label for cancel icon button")}):p.a.createElement(v.o,{onClick:o.handleNewMessageButtonClick,icon:"compose",iconColor:"gray",size:"sm",accessibilityLabel:b.a._("composeNewMessage","accessibility label for compose icon button")})),a&&p.a.createElement(v.b,{position:"absolute",left:!0,dangerouslySetInlineStyle:{__style:{padding:10}}},p.a.createElement(v.o,{onClick:o.handleNewMessageButtonClick,icon:"compose",iconColor:"gray",size:"sm",accessibilityLabel:b.a._("composeNewMessage","accessibility label for compose button")})),p.a.createElement(v.b,{paddingY:4,dangerouslySetInlineStyle:{__style:{paddingRight:"25%",paddingLeft:"25%"}}},p.a.createElement(v.K,{bold:!0,size:"md",align:"center"},b.a._("Messages","header text for conversations dropdown")))),d?p.a.createElement(Me,{onClick:o.handleViewContactRequestsClick}):o.shouldShowContactRequestButton&&p.a.createElement("div",{className:"viewContactRequestsButtonContainer"},p.a.createElement(te,{onClick:o.handleViewContactRequestsClick})),p.a.createElement("div",{className:"existingConversationItemsWrapper"},!d&&p.a.createElement(f.Fragment,null,p.a.createElement("div",{className:"boardInvitesContainer"},p.a.createElement(xt,{boardInvites:l&&l.data||[],boardJoinRequests:s&&s.data||[],onDeclineRequest:o.handleBoardInvitesDidUpdate})),p.a.createElement("div",{className:"boardInviteContactRequestsContainer"},p.a.createElement(O,{contactRequests:u&&u.data||[],onDeclineRequest:o.handleContactRequestsDidUpdate}))),")",p.a.createElement(v.b,{position:"relative"},p.a.createElement(v.b,{position:"absolute",width:"100%",top:!0,marginBottom:12},p.a.createElement("ul",{className:"conversationItems"},0===i.length&&c?o.renderEmptyMessagesNewMessageUpsell():i.map(function(e,t){return p.a.createElement("li",{className:"conversationItemWrapper",key:e.id},p.a.createElement(rt,{data:e}),t<i.length-1?p.a.createElement(v.j,null):null)})))),r&&p.a.createElement(v.b,{bottom:!0,width:"100%",position:"absolute",dangerouslySetInlineStyle:{__style:{padding:14,background:"white"}}},p.a.createElement(v.c,{text:b.a._("New message","compose button on the conversation panel"),onClick:o.handleNewMessageButtonClick,size:"sm",accessibilityLabel:b.a._("composeNewMessage","accessibility label for compose button")}))))})}},{key:"renderMessageView",value:function e(){switch(this.state.currentView){case Vt:return this.renderExistingConversationsView();case Gt:return this.renderNewMessageView();case Kt:return this.renderContactRequestsView()}}},{key:"render",value:function e(){var n=this;return p.a.createElement(Tt.a,{view:42,viewParameter:203},p.a.createElement("div",{className:"conversationPanel",ref:function e(t){n._container=t}},this.renderMessageView()))}},{key:"shouldShowEmptyState",get:function e(){var t=this.props,n=t.boardInvites,r=t.boardJoinRequests,a=t.contactRequests,o;return 0===(n&&n.data||[]).length+(r&&r.data||[]).length+(a&&a.data||[]).length}},{key:"shouldShowContactRequestButton",get:function e(){var t=this.props.contactRequests;return 0<(t&&t.data||[]).length}}]),o}(f.Component);function Qt(e){return e.sort(function(e,t){return new Date((t.last_message||t).created_at)-new Date((e.last_message||e).created_at)}),e}var $t=function e(t){return Object.keys(t).map(function(e){return t[e]})},en=function e(t){var n=t.conversations,r=t.viewer;return{conversations:Qt($t(n.data)),isFullAuth:r.isAuth&&!r.isLimitedLogin}},tn=t.a=Object(Re.compose)(Object(r.connect)(en),Object(J.b)({name:"ConversationsResource",key:"conversationsResource"},{allowStale:!1}),Object(Ne.b)({name:"BoardOwnerCollaboratorJoinRequestsResource",key:"boardJoinRequests",options:{field_set_key:"news"}},{allowStale:!1}),Object(Ne.b)({name:"ContactRequestsResource",key:"contactRequests"},{allowStale:!1}),Object(Ne.b)({name:"BoardInvitesResource",key:"boardInvites",options:{current_user:!0,field_set_key:"news"}},{allowStale:!1}))(Zt)},nM9s:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var w=n("d6ZO"),r=n.n(w),i=n("FHH+"),a=n("GGB8"),_=n.n(a),C=n("cy6F");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?m(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(e){function o(){var e,t;c(this,o);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return b(m(m(t=u(this,(e=d(o)).call.apply(e,[this].concat(r))))),"handleClick",function(e){e&&e.preventDefault(),t.props.loading||(t.props.src?Object(i.a)(t.props.src):t.props.onClick&&t.props.onClick(e),t.props.stopPropagation&&e.stopPropagation())}),t}return f(o,e),l(o,[{key:"render",value:function e(){var t=this.props,n=t.accessibilityLabel,r=t.children,a=t.disabled,o=t.hasIcon,i=t.htmlType,c=t.id,s=t.itemProp,l=t.large,u=t.loading,d=t.onMouseDown,f=t.onMouseEnter,p=t.onMouseLeave,m=t.rel,b=t.rounded,h=t.showText,v=t.style,y=t.text,g=t.type,E=_()(this.props.className,{Button:"plain"!==g,Module:"plain"!==g,btn:"borderless"!==g&&"plain"!==g,hasIcon:o,hasText:h,rounded:!0===b,leftRounded:"left"===b,rightRounded:"right"===b,borderless:"borderless"===g,primary:"primary"===g,disabled:a,large:l});return w.createElement("button",{"aria-label":n||null,className:E,disabled:a,id:c,itemProp:s,onClick:this.handleClick,onMouseDown:d,onMouseEnter:f,onMouseLeave:p,rel:m,style:v,type:i},u?w.createElement(C.a,{size:"small"}):null,r,o?w.createElement("em",null):null,w.createElement("span",{className:h?"buttonText":"accessibilityText"},y))}}]),o}(w.Component);b(h,"defaultProps",{disabled:!1,htmlType:"button",large:!1,rounded:!0,showText:!0,type:"default"})},"pN+K":function(e,t,n){"use strict";t.a=N,t.c=B;var u=n("d6ZO"),r=n.n(u),a=n("DUIN"),o=n("lJK6"),b=n("FfPm"),i=n("IaRT"),c=n.n(i),s=n("S+Qs");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function d(e,t){if(null==e)return{};var n=f(e,t),r,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function f(e,t){if(null==e)return{};var n={},r=Object.keys(e),a,o;for(o=0;o<r.length;o++)a=r[o],0<=t.indexOf(a)||(n[a]=e[a]);return n}function p(e){return v(e)||h(e)||m()}function m(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function h(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function v(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){S(t,e,n[e])})}return t}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t,n){return t&&E(e.prototype,t),n&&E(e,n),e}function _(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?I(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}function k(e,t){return(k=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j=function e(t,n){return JSON.stringify(t)===JSON.stringify(n)};function N(e,t){return Object(o.a)("function"==typeof e?e(t):e||{})}var R=function e(t){var m={};return function(c){return function(e,l){var t=e.resources,r=t.fetching,u=t.data,n=c.some(function(e){var t=e.name,n=e.options;return r[t]&&r[t][N(n,l)]}),d={},f,p=[];c.forEach(function(e){var t=e.name,n=e.options,r=e.key;if(u[t]){var a=N(n,l);if(m[t]||(a in u[t]?b.default.increment("webapp.withResource.cache-hit",.05,{resource:t,cache_size:Object.keys(u[t]).length,level:"success",v:1}):Object.keys(u[t]).length?b.default.increment("webapp.withResource.populated-cache-miss",.05,{resource:t,cache_size:Object.keys(u[t]).length,level:"error",v:1}):b.default.increment("webapp.withResource.empty-cache-miss",.05,{resource:t,cache_size:Object.keys(u[t]).length,level:"warn",v:1})),m[t]=!0,u[t][a]){var o=u[t][a],i=o.data,c=o.nextBookmark,s=o.error;d[r]=i,p.push(c),s&&(f=s)}}else b.default.increment("webapp.withResource.no-cache",.05,{resource:t,cache_size:0,level:"error",v:1})});var a=c.every(function(e){var t=e.key;return void 0!==d[t]}),o,i;return{resourceLoaded:a,isAtEnd:a&&!n&&p.every(function(e){return"-end-"===e}),isFetching:n,nextBookmark:p[0],resourceData:d,error:f}}}},x=function e(i){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return function(l){var e,t;return t=e=function(e){function o(){var e,t;g(this,o);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return S(I(I(t=_(this,(e=C(o)).call.apply(e,[this].concat(r))))),"loadData",function(a){var o=c;i.forEach(function(e){var t=e.options,n=e.name,r="function"==typeof t?t(a):t;a.dispatch(Object(s.a)(n,r,void 0,void 0,o.traceLoggerHandlerName))})}),S(I(I(t)),"loadMoreData",function(a){var o=c;i.forEach(function(e){var t=e.options,n=e.name,r="function"==typeof t?t(a):t;a.dispatch(Object(s.d)(n,r,void 0,void 0,o.traceLoggerHandlerName))})}),S(I(I(t)),"resourcesHash",JSON.stringify(i.map(function(e){return y({},e,{options:N(e.options,t.props)})}))),t}return O(o,e),w(o,[{key:"componentDidMount",value:function e(){!1!==c.allowStale&&this.props.resourceLoaded||this.loadData(this.props)}},{key:"shouldComponentUpdate",value:function e(t){var n=p(Object.keys(this.props)).concat(p(Object.keys(t))),r=!0,a=!1,o=void 0;try{for(var i=n[Symbol.iterator](),c;!(r=(c=i.next()).done);r=!0){var s=c.value;if("resourceData"===s){if(!j(this.props.resourceData,t.resourceData))return!0}else if(this.props[s]!==t[s])return!0}}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return!1}},{key:"UNSAFE_componentWillUpdate",value:function e(t){!this.props.resourceLoaded&&t.resourceLoaded&&this.props.onResourceLoaded&&this.props.onResourceLoaded(),!this.props.error&&t.error&&this.props.onResourceError&&this.props.onResourceError(t.error);var n=JSON.stringify(i.map(function(e){return y({},e,{options:N(e.options,t)})}));this.resourcesHash!==n&&(this.loadData(t),this.resourcesHash=n)}},{key:"render",value:function e(){var t=this,n=this.props,r=n.error,a=n.isAtEnd,o=n.isFetching,i=n.resourceData,c=n.resourceLoaded,s=d(n,["error","isAtEnd","isFetching","resourceData","resourceLoaded"]);return delete s.onResourceError,delete s.onResourceLoaded,u.createElement(l,Object.assign({},i,s,{error:r,fetchMoreData:function e(){return t.loadMoreData(t.props)},isAtEnd:a,isFetching:o,refreshData:function e(){return t.loadData(t.props)},resourceLoaded:c}))}}]),o}(u.Component),S(e,"WrappedComponent",l),S(e,"displayName",1===i.length?i[0].name:"".concat(i.length," resources")),t}},T=function e(n){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return function(e){var t={name:n.name,options:n.options||{},key:n.key||"data"};return Object(a.connect)(R(e)([t]))(x([t],r)(e))}},P=T;t.b=T;var A=function e(t){var o=t.name,i=t.options;return function(e,t){var n=e.resources.data;if(n[o]){var r=N(i,t),a;if(n[o][r])return{data:n[o][r].data}}return{data:null}}};function B(e){var t=e.name,n=e.options;return Object(a.connect)(A({name:t,options:n||{}}))}},tZWC:function(e,t,n){"use strict";var r=n("d6ZO"),m=n.n(r),a=n("DUIN"),o=n("GGB8"),b=n.n(o),i=n("PrM5"),h=n("W/Cr"),v=n("XSNT"),c=n("IaRT"),s=n.n(c),l=n("z/23"),u=n("9bGG"),d=n("gEaE");function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),e}function E(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?O(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}function C(e,t){return(C=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=function(e){function o(){var e,r;p(this,o);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return k(O(O(r=E(this,(e=w(o)).call.apply(e,[this].concat(n))))),"renderInviteButton",function(e){var t=r.props.inviteQueue;if(!t)return null;var n={text:h.a._("Add","Add board collaborator invite"),color:"red",size:"sm"};return t&&t[e]&&(n.text=h.a._("Remove","Remove a board collaborator invite"),n.color="gray"),m.a.createElement(d.c,n)}),r}return _(o,e),g(o,[{key:"UNSAFE_componentWillReceiveProps",value:function e(t){!this.props.isHovering&&t.isHovering?this.props.onHoverStart():this.props.isHovering&&!t.isHovering&&this.props.onHoverEnd()}},{key:"render",value:function e(){var t=this.props,n=t.is_pinner?h.a._("On Pinterest"):t.email?t.email:"facebook_non_pinner"===t.type?h.a._("Facebook"):"gplus_non_pinner"===t.type?h.a._("Google"):h.a._("Enter an email address");return m.a.createElement("a",Object.assign({},this.props.hoverHandlers,{onClick:this.props.onClick,role:"button"}),m.a.createElement(d.b,{position:"relative"},t.send_pin_image?m.a.createElement("span",{className:"typeaheadImg"},m.a.createElement("img",{alt:"",src:t.send_pin_image})):null,m.a.createElement("p",{className:b()("typeaheadName",{hasImage:t.send_pin_image})},t.label),m.a.createElement("div",{className:"titleWrapper"},m.a.createElement("i",{className:b()("titleIcon",{isPinner:t.is_pinner},{isFacebook:"facebook_non_pinner"===t.type},{isGplus:"gplus_non_pinner"===t.type})}),m.a.createElement("p",{className:"title"},n)),m.a.createElement(d.b,{top:!0,right:!0,position:"absolute",width:90},this.renderInviteButton(t.id))))}}]),o}(r.Component),S=Object(u.a)(I),j=n("Svvu"),N=n("cD7N");function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=j.default.FACEBOOK,T=j.default.GPLUS,P=j.default.TWITTER,A=j.default.YAHOO;function B(e){N.a.instance().handleConnect(e,!0,{})}function q(e){var t,n=e.network,r=(R(t={},x,h.a._("Find friends from Facebook")),R(t,T,h.a._("Find friends from Google+")),R(t,P,h.a._("Find friends from Twitter")),R(t,A,h.a._("Find friends from Yahoo")),t);return m.a.createElement("div",{className:"socialConnect",role:"listitem"},m.a.createElement(d.O,{onTouch:function e(){return B(n)},fullWidth:!1},m.a.createElement("div",{className:"socialConnectItem"},m.a.createElement("div",{className:"left"},m.a.createElement("div",{className:b()("icon","socialConnect-".concat(n))},m.a.createElement("em",null))),m.a.createElement("div",{className:"right"},m.a.createElement("h4",{className:"title"},r[n])))))}var D=n("skut"),L=n("Cjb7"),M=n("5tOk"),z=n("woYD"),U=n("T0l7");function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function F(e){return G(e)||V(e)||W()}function W(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function V(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function G(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function K(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function X(e,t,n){return t&&Y(e.prototype,t),n&&Y(e,n),e}function J(e,t){return!t||"object"!==H(t)&&"function"!=typeof t?ee(e):t}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function Q(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}function $(e,t){return($=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ne=[j.default.FACEBOOK,j.default.TWITTER,j.default.GPLUS],re=function(e){function a(){var e,c;K(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return te(ee(ee(c=J(this,(e=Z(a)).call.apply(e,[this].concat(n))))),"state",{networks:c.props.viewer.isAuth?c.props.viewer.socialNetwork:null,open:!1,typeaheadSuggestions:[]}),te(ee(ee(c)),"onUserInviteClick",function(e){var t=e.id,n=e.full_name,r=c.props,a=r.boardId,o=r.onInviteItemClick;a?o(Object(U.d)(a,[t]),{type:"user",userName:n}):o(e,!0)}),te(ee(ee(c)),"handleBodyClick",function(e){c._results.contains(e.target)||c.setState({open:!1})}),te(ee(ee(c)),"handleTypeaheadSuggestionsChange",function(e){var t=c.props.viewer;c.setState({typeaheadSuggestions:(e||[]).filter(function(e){return e.id!==t.id})})}),te(ee(ee(c)),"handleOnEmailInviteClick",function(){var e=c.props,t=e.boardId,n=e.onInviteItemClick,r=e.value;t?n(Object(U.c)(t,[r]),{type:"email",email:r}):n(r,!1)}),te(ee(ee(c)),"subscriber",L.b.subscribe("currentUser","socialNetworkUpdated",function(e,t,n){c.setState({networks:Object(i.a)(n)})})),te(ee(ee(c)),"logTypeaheadInput",function(e){Object(z.a)(4113,{component:13029,element:1043,entered_query:e})}),te(ee(ee(c)),"logSearchContactItemClick",function(e){var t=c.props.value;Object(z.a)(101,{component:13029,element:1044,entered_query:t,result_index:e})}),te(ee(ee(c)),"renderResultItems",function(){var e=c.props,r=e.changeOnTextHover,a=e.inviteQueue,t=e.isComposeMessageExpEnabled,n=b()("Typeahead","userSelect",{open:c.state.open}),o=c.state.typeaheadSuggestions.map(function(t,n){return m.a.createElement(S,Object.assign({key:n,onClick:function e(){c.onUserInviteClick(t),c.logSearchContactItemClick(n)},onHoverEnd:function e(){return r?c.restoreTextFieldValue():null},onHoverStart:function e(){return r?c.forceTextFieldValue(t.label):null},inviteQueue:a},t))}).concat(c.getStaticItems()).map(function(e,t){return m.a.createElement("li",{key:t},e)}),i=t?{overflow:"visible",zIndex:1e3,marginTop:4,borderTop:"none"}:{overflow:"auto",zIndex:1e3};return m.a.createElement("div",{className:n,ref:function e(t){c._results=t},style:i},m.a.createElement("ul",null,o))}),c}return Q(a,e),X(a,[{key:"componentDidMount",value:function e(){var t=this;["mousedown","touchstart"].forEach(function(e){document.addEventListener(e,t.handleBodyClick)})}},{key:"UNSAFE_componentWillReceiveProps",value:function e(t){var n=t.value;this.setState({open:0<n.length})}},{key:"componentWillUnmount",value:function e(){var t=this;["mousedown","touchstart"].forEach(function(e){document.removeEventListener(e,t.handleBodyClick)}),this.subscriber.unsubscribe()}},{key:"getStaticItems",value:function e(){return F(this.getEmailItems()).concat(F(this.getSocialItems(this.state.networks)))}},{key:"getEmailItems",value:function e(){var t=this.props.value;return[m.a.createElement(l.a,{email:t,isValid:Object(M.g)(t),key:"send-to-email-component",onClick:this.handleOnEmailInviteClick,showSendEmailText:!1})]}},{key:"getSocialItems",value:function e(t){var n;return ne.filter(function(e){return!t||!1===t[e].connected}).map(function(e,t){return m.a.createElement(q,{key:"socialConnect-".concat(e),network:e})})}},{key:"forceTextFieldValue",value:function e(t){this.previousValue=this.props.value,this.props.onChange(t)}},{key:"restoreTextFieldValue",value:function e(){this.props.onChange(this.previousValue),delete this.previousValue}},{key:"render",value:function e(){var n=this,t=this.props,r=t.boardId,a=t.className,o=t.inBoardCollaboratorInviter,i=t.onChange,c=t.onKeyDown,s=t.showInputPlaceholder,l=t.isComposeMessageExpEnabled,u=t.value,d=b()("Input","field",{reactCollaboratorInviterTypeaheadCustom:o},{collaboratorInviterTypeahead:!o}),f=r?{board:r}:null,p=l?h.a._("Enter name or email","search"):h.a._("Name or email","search");return m.a.createElement(D.a,{onTypeaheadSuggestionsChange:this.handleTypeaheadSuggestionsChange,resourceName:"ShareSuggestionsTypeaheadResource",resourceOptions:f,value:u},m.a.createElement("div",{className:b()(a,"reactSocialTypeahead")},m.a.createElement("div",{className:b()("TypeaheadField","userSelect","inputContainer",{socialInboxTypeahead:l})},m.a.createElement(v.a,{className:d,id:"collaboratorInviterTypeahead",onChange:function e(t){i(t),n.logTypeaheadInput(t)},onKeyDown:c,placeholder:s?p:null,value:u,focused:!0})),this.renderResultItems()))}}]),a}(r.Component);te(re,"defaultProps",{changeOnTextHover:!1,onKeyDown:function e(){},showInputPlaceholder:!0,isComposeMessageExpEnabled:!1});var ae=function e(t){var n;return{viewer:t.viewer}},oe=t.a=Object(a.connect)(ae)(re)},"z/23":function(e,t,n){"use strict";t.a=c;var s=n("d6ZO"),r=n.n(s),a=n("GGB8"),l=n.n(a),u=n("W/Cr"),o=n("IaRT"),i=n.n(o),d=n("5tOk");function c(e){var t=e.email,n=e.isValid,r=e.onClick,a=e.showSendEmailText,o=n?s.createElement("div",{className:"icon"},t[0].toUpperCase()):s.createElement("div",{className:l()("icon","typingEmail")},s.createElement("em",null)),i=n?u.a._("Click to send!"):u.a._("Keep typing!"),c=a?Object(d.h)(u.a._("Email {{ email }}"),{email:t}):Object(d.h)(u.a._("Invite {{ email }}"),{email:t});return s.createElement("div",{className:l()("sendToEmail",{unclickable:!n})},s.createElement("a",{className:"selectableEmailItem",onClick:function e(){n&&r()},role:"button"},s.createElement("div",{className:"left"},o),s.createElement("div",{className:"right"},s.createElement("h4",{className:"title"},c),s.createElement("p",{className:"subtitle"},i))))}}});